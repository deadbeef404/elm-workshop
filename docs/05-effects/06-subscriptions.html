<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.29" />
    <meta name="description" content="Elm Workshop">
<meta name="author" content="Sebastian Porto">

    <title>Subscriptions :: Elm Workshop</title>
    <link rel="shortcut icon" href="../images/favicon.png" type="image/x-icon" />
    <link href="../css/nucleus.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/hybrid.css" rel="stylesheet">
    <link href="../css/featherlight.min.css" rel="stylesheet">
    <link href="../css/horsey.css" rel="stylesheet">
    
    <link href="../css/theme.css" rel="stylesheet">
    
    
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    <link rel="stylesheet" type="text/css" href="./agate.css" />
<style type="text/css">
	#top-bar {
		display: none;
	}

	#TableOfContents {
		display: none;
	}

	#sidebar ul.topics ul {
		display: initial;
	}
</style>
  </head>
  <body class="" data-url="/05-effects/06-subscriptions.html">
    <nav id="sidebar" class="">





<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
       
	<p>Elm Workshop</p>
 


    </div>
    
  </div>

  
    <ul class="topics">
        
        
        
          
          


 
  
    
    <li data-nav-id="/01-introduction.html" class="dd-item 
        
        
        
        ">
      <a href="../01-introduction.html">
        <span>Introduction</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/01-introduction/01-what-is-elm.html" class="dd-item
     
      ">
        <a href="../01-introduction/01-what-is-elm.html">
        <span>What is Elm</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/01-introduction/02-why-elm.html" class="dd-item
     
      ">
        <a href="../01-introduction/02-why-elm.html">
        <span>Why Elm</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/01-introduction/03-functions.html" class="dd-item
     
      ">
        <a href="../01-introduction/03-functions.html">
        <span>Functions</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/02-hello-world.html" class="dd-item 
        
        
        
        ">
      <a href="../02-hello-world.html">
        <span>Hello World</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/02-hello-world/01-setup.html" class="dd-item
     
      ">
        <a href="../02-hello-world/01-setup.html">
        <span>Setup</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/02-hello-world/02-first-app.html" class="dd-item
     
      ">
        <a href="../02-hello-world/02-first-app.html">
        <span>Your first app</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/02-hello-world/03-exercise.html" class="dd-item
     
      ">
        <a href="../02-hello-world/03-exercise.html">
        <span>Exercise</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/03-tea.html" class="dd-item 
        
        
        
        ">
      <a href="../03-tea.html">
        <span>The Elm Architecture</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/03-tea/01-intro.html" class="dd-item
     
      ">
        <a href="../03-tea/01-intro.html">
        <span>The Elm Architecture</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/03-tea/02-structure.html" class="dd-item
     
      ">
        <a href="../03-tea/02-structure.html">
        <span>Structure</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/03-tea/03-breakdown.html" class="dd-item
     
      ">
        <a href="../03-tea/03-breakdown.html">
        <span>TEA Breakdown</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/03-tea/04-breakdown-messages.html" class="dd-item
     
      ">
        <a href="../03-tea/04-breakdown-messages.html">
        <span>Messages</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/03-tea/05-breakdown-view.html" class="dd-item
     
      ">
        <a href="../03-tea/05-breakdown-view.html">
        <span>View</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/03-tea/06-breakdown-update.html" class="dd-item
     
      ">
        <a href="../03-tea/06-breakdown-update.html">
        <span>Update</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/03-tea/07-breakdown-main.html" class="dd-item
     
      ">
        <a href="../03-tea/07-breakdown-main.html">
        <span>Program</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/03-tea/08-exercise.html" class="dd-item
     
      ">
        <a href="../03-tea/08-exercise.html">
        <span>Exercise</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/04-interaction.html" class="dd-item 
        
        
        
        ">
      <a href="../04-interaction.html">
        <span>Interaction</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/04-interaction/01-start.html" class="dd-item
     
      ">
        <a href="../04-interaction/01-start.html">
        <span>Start</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/04-interaction/02-flow.html" class="dd-item
     
      ">
        <a href="../04-interaction/02-flow.html">
        <span>Flow</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/04-interaction/03-message.html" class="dd-item
     
      ">
        <a href="../04-interaction/03-message.html">
        <span>Messages</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/04-interaction/04-update.html" class="dd-item
     
      ">
        <a href="../04-interaction/04-update.html">
        <span>Update</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/04-interaction/05-exercise.html" class="dd-item
     
      ">
        <a href="../04-interaction/05-exercise.html">
        <span>Exercise</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/05-effects.html" class="dd-item 
        parent
        
        
        ">
      <a href="../05-effects.html">
        <span>Tasks &amp; Subscriptions</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/05-effects/01-intro.html" class="dd-item
     
      ">
        <a href="../05-effects/01-intro.html">
        <span>The Outside World</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/05-effects/02-start.html" class="dd-item
     
      ">
        <a href="../05-effects/02-start.html">
        <span>Start the Clock</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/05-effects/03-maybes.html" class="dd-item
     
      ">
        <a href="../05-effects/03-maybes.html">
        <span>Maybes</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/05-effects/04-tasks.html" class="dd-item
     
      ">
        <a href="../05-effects/04-tasks.html">
        <span>Tasks</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/05-effects/05-format-time.html" class="dd-item
     
      ">
        <a href="../05-effects/05-format-time.html">
        <span>Format Time</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/05-effects/06-subscriptions.html" class="dd-item
     active
      ">
        <a href="../05-effects/06-subscriptions.html">
        <span>Subscriptions</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/05-effects/07-exercise.html" class="dd-item
     
      ">
        <a href="../05-effects/07-exercise.html">
        <span>Exercise</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/06-conclusion.html" class="dd-item 
        
        
        
        ">
      <a href="../06-conclusion.html">
        <span>Conclusion</span>

        
        

        
      </a>
              
    </li>
  
 

          
        

        
        <section id="shortcuts">
            
                <li class="" role="">
                    <h3>More</h3>
                    <a href="https://github.com/sporto/elm-workshop"><i class='fa fa-github'></i> Github repo</a>
                    
                </li>
            
        </section>    
        
        

        
    </ul>
    
     
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            
              
              
              
            <div id="top-github-link">
              <a class="github-link" href="https://github.com/sporto/elm-workshop05-effects/06-subscriptions.md" target="blank">
                <i class="fa fa-code-fork"></i>
                Edit page
              </a>
            </div>
              
            

            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                







 <a href='../'></a> > <a href='../05-effects.html'>Tasks & Subscriptions</a> > Subscriptions

 

 

   
                </span>
            </div>
            <div class="progress">
    <div class="wrapper">

    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>Subscriptions</h1>
          




<p>Rather than a static view of
the time at which we loaded the page,
we’d like our clock to update
as the seconds tick by.
We already know how to command Elm to fetch the current time,
but we can only issue commands
in our <code>init</code> function (when our program starts up),
and in our <code>update</code> function (in response to a message).</p>

<p>What we need is a way to command Elm to send you
not just a <em>single</em> message with the current <code>Time</code>,
but to send you a new message once every second.
This is what <strong>subscriptions</strong> are for.</p>

<p>Every Elm program we’ve written so far has contained
a <code>subscriptions</code> function that returns <code>Sub.none</code>:</p>

<pre><code class="language-elm">subscriptions : Model -&gt; Sub Msg
subscriptions model =
    Sub.none
</code></pre>

<p>Just as <code>Cmd.none</code> means “I don’t have a command for Elm right now”,
<code>Sub.none</code> means “There’s nothing I want Elm to subscribe me to right now.”</p>

<p>Elm’s core modules offer several functions for creating subscriptions.
<a href="http://package.elm-lang.org/packages/elm-lang/core/5.1.1/Time#every"><code>Time.every</code></a>, for example, lets us subscribe to
receive a message with the current <code>Time</code>
every second:</p>

<pre><code class="language-elm">subscriptions : Model -&gt; Sub Msg
subscriptions model =
    Time.every Time.second NewTime
</code></pre>

<p>Run your program now, and our clock should be ticking!</p>

<p><code>Time.every</code> uses JavaScript’s <code>setInterval</code> function.
As you may know, <code>setInterval</code> isn’t guaranteed to run exactly on time,
so to make sure our clock doesn’t skip any seconds,
we can subscribe to more frequent events,
say one every 100 milliseconds:</p>

<pre><code class="language-elm">subscriptions : Model -&gt; Sub Msg
subscriptions model =
    Time.every (100 * Time.millisecond) NewTime
</code></pre>

<p>To confirm this change is working,
look at the message count on the Elm debugger
at the bottom of your browser window.
It should be counting up roughly ten times per second.</p>

<p>Notice that the <code>subscriptions</code> function
receives your program’s current model as an argument.
Elm calls <code>subscriptions</code>
whenever your program makes a change to its model.
This gives you the freedom to vary your subscriptions
in response to changes in the state of your program.</p>

<p>For example, we could wait until
our program had received the first <code>Time</code> value
(from the command issued by our <code>init</code> function)
before subscribing to further time updates:</p>

<pre><code class="language-elm">subscriptions : Model -&gt; Sub Msg
subscriptions model =
    case model.time of
        Nothing -&gt;
            Sub.none

        Just _ -&gt;
            Time.every (100 * Time.millisecond) NewTime
</code></pre>

<p>Now that we have a ticking clock, it’s time to turn it into a stopwatch!</p>


<footer class=" footline" >
	
</footer>



      </div>
    </div>

    
 
    

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="../05-effects/05-format-time.html" title="Format Time"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="../05-effects/07-exercise.html" title="Exercise" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../js/clipboard.min.js"></script>
    <script src="../js/featherlight.min.js"></script>
    <script src="../js/html5shiv-printshiv.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../js/modernizr.custom.71422.js"></script>
    <script src="../js/learn.js"></script>
    <script src="../js/hugo-learn.js"></script>

    
    <link href="../mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
    <script src="../mermaid/mermaid.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    

    
  </body>
</html>

